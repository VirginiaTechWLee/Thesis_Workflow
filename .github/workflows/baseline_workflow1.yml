- name: Commit baseline to Git
        if: ${{ github.event_name == 'workflow_dispatch' || inputs.commit_results == true }}
        run: |
          $git = "${{ vars.GIT_PATH }}"
          
          & $git config user.name "GitHub Actions"
          & $git config user.email "actions@github.com"
          
          # Force add files that might be in .gitignore
          & $git add -f baseline\randombeamx.pch
          & $git add -f baseline\randombeamx.f06
          & $git add -f baseline\randombeamx.op2
          & $git add -f baseline\fixed_base_beam.MASTER
          & $git add -f baseline\fixed_base_beam.f06
          & $git add -f baseline\fixed_base_beam.op2
          & $git add -f baseline\*.csv
          & $git add -f baseline\*.png
          & $git add -f baseline\Bush.blk
          & $git add Bush.blk
          & $git status
          
          $status = & $git status --porcelain
          if ($status) {
            & $git commit -m "Update baseline - $(Get-Date -Format 'yyyy-MM-dd HH:mm')"
            & $git push
            Write-Host "Baseline committed to Git [PASS]"
          } else {
            Write-Host "No changes to commit"
          }